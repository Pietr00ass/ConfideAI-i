<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ConfideAI{% endblock %}</title>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <!-- Podstawowy CSS -->
  <link rel="stylesheet" href="/static/css/style.css">

  <!-- FontAwesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-pEMXVoV9o+3uolcfpoF7XkFVdPxwZl0VqXQ3N+uPO5WVMh8h5cDJ0ftxFSCF7P1kC9q88F3BG5p3sP4nO96Uiw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
</head>
<body>
  {% include "img/icons.svg" %}
  <!-- Vanta.js tło -->
  <div id="vanta-bg"></div>

  <!-- Loader -->
  <div id="loader-overlay">
    <div id="container">
      <div id="html-spinner"></div>
      <p id="html-para">Ładowanie aplikacji…</p>
    </div>
  </div>

  <!-- Nawigacja -->
  {% include "nav.html" %}

  <!-- Particles.js -->
  <div id="particles-js"></div>

  <!-- Główna zawartość -->
  <main>
    {% block content %}{% endblock %}
  </main>

  <!-- Back to Top -->
  <button id="back-to-top" title="Back to top"><i class="fas fa-chevron-up"></i></button>

  <!-- Footer -->
  <footer>
    <p>© 2025 ConfideAI — Wszystkie prawa zastrzeżone.</p>
  </footer>

  <!-- Skrypty zewnętrzne -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/rellax@1.12.1/rellax.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <script>
    // 1. Ukryj loader
    window.addEventListener('load', () => {
      document.getElementById('loader-overlay').style.display = 'none';
    });

    // 2. AOS init
    AOS.init({ duration: 800, once: true });

    // 3. Parallax init
    new Rellax('.rellax', { speed: -2 });

    // 4. Particles.js
    particlesJS.load('particles-js', '/static/particles.json');

    // 5. Back to Top
    const backBtn = document.getElementById('back-to-top');
    window.addEventListener('scroll', () => {
      backBtn.style.display = window.scrollY > 300 ? 'block' : 'none';
    });
    backBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // 6. Vanta.NET
    document.addEventListener("DOMContentLoaded", () => {
      VANTA.NET({
        el: "#vanta-bg",
        color: 0x222222,
        backgroundColor: 0x000000,
        maxDistance: 20.00,
        spacing: 15.00,
        showDots: false
      });
    });

    // 7. IntersectionObserver dla reveal
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('reveal');
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.2 });
    document.querySelectorAll('.reveal-on-scroll').forEach(el => io.observe(el));
  </script>
</body>
</html>
